# Flutterè§†é¢‘ä¼šè®®åº”ç”¨

è¿™æ˜¯ä¸€ä¸ªåŸºäºFlutterå’ŒLiveKitå¼€å‘çš„ç§»åŠ¨è§†é¢‘ä¼šè®®åº”ç”¨ï¼Œä¸ç°æœ‰çš„PHPåç«¯ç³»ç»Ÿå®Œå…¨é›†æˆã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **å®æ—¶è§†é¢‘é€šè¯** - åŸºäºLiveKit WebRTCæŠ€æœ¯
- **éŸ³é¢‘é€šè¯** - é«˜è´¨é‡éŸ³é¢‘ä¼ è¾“
- **èŠå¤©åŠŸèƒ½** - ä¼šè®®æœŸé—´å®æ—¶æ–‡å­—èŠå¤©
- **å±å¹•å…±äº«** - æ”¯æŒå±å¹•å†…å®¹åˆ†äº«
- **å‚ä¸è€…ç®¡ç†** - æŸ¥çœ‹å’Œç®¡ç†ä¼šè®®å‚ä¸è€…

### ç”¨æˆ·ç®¡ç†
- **ç”¨æˆ·æ³¨å†Œ/ç™»å½•** - å®‰å…¨çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **æƒé™ç®¡ç†** - æ™®é€šç”¨æˆ·ã€ä¸»æŒäººã€ç®¡ç†å‘˜ä¸‰çº§æƒé™
- **å¯†ç ä¿®æ”¹** - ç”¨æˆ·å¯è‡ªä¸»ä¿®æ”¹å¯†ç 
- **ä¸ªäººè®¾ç½®** - ä¸ªæ€§åŒ–ä¼šè®®è®¾ç½®

### ä¼šè®®æ§åˆ¶
- **æ‘„åƒå¤´æ§åˆ¶** - å¼€å¯/å…³é—­æ‘„åƒå¤´ï¼Œå‰åæ‘„åƒå¤´åˆ‡æ¢
- **éº¦å…‹é£æ§åˆ¶** - å¼€å¯/å…³é—­éº¦å…‹é£ï¼ŒéŸ³é‡è°ƒèŠ‚
- **ç”³è¯·ä¸Šéº¦** - æ™®é€šç”¨æˆ·å¯ç”³è¯·å‘è¨€æƒé™
- **ä¼šè®®è®¾ç½®** - éŸ³é¢‘/è§†é¢‘è´¨é‡è®¾ç½®

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### Flutterç«¯
- **æ¡†æ¶**: Flutter 3.24+
- **çŠ¶æ€ç®¡ç†**: Provider
- **ç½‘ç»œè¯·æ±‚**: Dio
- **å®æ—¶é€šä¿¡**: LiveKit Flutter SDK
- **æœ¬åœ°å­˜å‚¨**: SharedPreferences + FlutterSecureStorage

### åç«¯é›†æˆ
- **APIåç«¯**: å¤ç”¨ç°æœ‰PHPåç«¯ (`https://meet.pgm18.com/admin/`)
- **æ•°æ®åº“**: SQLite (ç”¨æˆ·ã€æˆ¿é—´ã€å‚ä¸è€…ç®¡ç†)
- **æƒé™ç³»ç»Ÿ**: ä¸ç°æœ‰ä¸‰çº§æƒé™ç³»ç»Ÿå®Œå…¨å…¼å®¹
- **LiveKitæœåŠ¡å™¨**: å…±äº«ç°æœ‰LiveKitå®ä¾‹

### æƒé™ç³»ç»Ÿ
```
ç”¨æˆ·è§’è‰²è¯´æ˜:
- 1 = æ™®é€šä¼šå‘˜ (ROLE_MEMBER)
- 2 = ä¸»æŒäºº (ROLE_HOST) 
- 3 = ç®¡ç†å‘˜ (ROLE_ADMIN)

æˆ¿é—´æƒé™:
- ç®¡ç†å‘˜: æ‰€æœ‰æˆ¿é—´éƒ½æœ‰ç®¡ç†æƒé™
- ä¸»æŒäºº: åªåœ¨è¢«æŒ‡å®šçš„æˆ¿é—´æœ‰ä¸»æŒäººæƒé™
- æ™®é€šç”¨æˆ·: éœ€è¦ç”³è¯·ä¸Šéº¦æ‰èƒ½å‘è¨€
```

## ğŸ“± ç•Œé¢è®¾è®¡

åº”ç”¨ç•Œé¢å®Œå…¨åŸºäºæä¾›çš„åŸå‹å›¾è®¾è®¡ï¼š

1. **ç™»å½•ç•Œé¢** - ç”¨æˆ·ç™»å½•å’Œæˆ¿é—´ç è¾“å…¥
2. **ä¼šè®®åˆ—è¡¨** - æ˜¾ç¤ºå¯ç”¨çš„ä¼šè®®æˆ¿é—´  
3. **è§†é¢‘ä¼šè®®ç•Œé¢** - ä¸»è¦çš„ä¼šè®®ç”»é¢å’Œæ§åˆ¶
4. **ä¸ªäººä¸­å¿ƒ** - ç”¨æˆ·ä¿¡æ¯å’Œè®¾ç½®ç®¡ç†
5. **ä¼šè®®è®¾ç½®** - éŸ³è§†é¢‘å‚æ•°é…ç½®
6. **ä¿®æ”¹å¯†ç ** - å®‰å…¨å¯†ç ä¿®æ”¹åŠŸèƒ½

## ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚
- Flutter SDK 3.24.0+
- Dart SDK 3.5.0+
- Android Studio / VS Code
- iOSå¼€å‘éœ€è¦Xcode (macOS)

### å®‰è£…ä¾èµ–
```bash
cd flutter_meeting_app
flutter pub get
```

### å¹³å°é…ç½®

#### Androidæƒé™ (android/app/src/main/AndroidManifest.xml)
```xml
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.INTERNET" />
```

#### iOSæƒé™ (ios/Runner/Info.plist)
```xml
<key>NSCameraUsageDescription</key>
<string>è§†é¢‘ä¼šè®®éœ€è¦ä½¿ç”¨æ‘„åƒå¤´</string>
<key>NSMicrophoneUsageDescription</key>
<string>è§†é¢‘ä¼šè®®éœ€è¦ä½¿ç”¨éº¦å…‹é£</string>
```

### è¿è¡Œåº”ç”¨
```bash
# Android
flutter run

# iOS (éœ€è¦macOS)
flutter run -d ios

# æŒ‡å®šè®¾å¤‡
flutter devices
flutter run -d <device-id>
```

## ğŸŒ APIé›†æˆ

### æ ¸å¿ƒæ¥å£
- `POST /admin/room-login.php` - æˆ¿é—´ç™»å½•è·å–LiveKit Token
- `GET /admin/room-info.php` - è·å–æˆ¿é—´ä¿¡æ¯
- `POST /admin/pc-register.php` - ç”¨æˆ·æ³¨å†Œ
- `GET /admin/list-room.php` - æˆ¿é—´åˆ—è¡¨ (éœ€è®¤è¯)

### æ•°æ®æµ
```
Flutter App -> PHP API -> LiveKit Server -> WebRTC
     â†“           â†“            â†“
  ç”¨æˆ·ç•Œé¢    æƒé™éªŒè¯    å®æ—¶é€šä¿¡
     â†“           â†“            â†“
  çŠ¶æ€ç®¡ç†    æ•°æ®åº“å­˜å‚¨   åª’ä½“ä¼ è¾“
```

## ğŸ“Š é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ main.dart                 # åº”ç”¨å…¥å£
â”œâ”€â”€ models/                   # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ user_model.dart
â”‚   â”œâ”€â”€ room_model.dart
â”‚   â”œâ”€â”€ login_response.dart
â”‚   â””â”€â”€ participant_model.dart
â”œâ”€â”€ services/                 # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api_service.dart     # APIé€šä¿¡
â”‚   â””â”€â”€ livekit_service.dart # LiveKité›†æˆ
â”œâ”€â”€ providers/               # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ auth_provider.dart
â”‚   â””â”€â”€ meeting_provider.dart
â”œâ”€â”€ screens/                 # ç•Œé¢
â”‚   â”œâ”€â”€ splash_screen.dart
â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”œâ”€â”€ register_screen.dart
â”‚   â”œâ”€â”€ meeting_list_screen.dart
â”‚   â”œâ”€â”€ video_conference_screen.dart
â”‚   â”œâ”€â”€ profile_screen.dart
â”‚   â”œâ”€â”€ settings_screen.dart
â”‚   â””â”€â”€ change_password_screen.dart
â””â”€â”€ widgets/                 # UIç»„ä»¶
    â”œâ”€â”€ video_track_widget.dart
    â”œâ”€â”€ participant_grid.dart
    â”œâ”€â”€ control_bar.dart
    â””â”€â”€ chat_panel.dart
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **Tokenè®¤è¯**: ä½¿ç”¨LiveKit JWT Tokenè¿›è¡Œä¼šè®®è®¤è¯
- **æƒé™æ§åˆ¶**: ç»†ç²’åº¦çš„ç”¨æˆ·æƒé™ç®¡ç†
- **å®‰å…¨å­˜å‚¨**: æ•æ„Ÿæ•°æ®ä½¿ç”¨FlutterSecureStorageåŠ å¯†å­˜å‚¨
- **ç½‘ç»œå®‰å…¨**: HTTPSé€šä¿¡ï¼Œé˜²æ­¢ä¸­é—´äººæ”»å‡»

## ğŸš¦ éƒ¨ç½²æµç¨‹

### å¼€å‘ç¯å¢ƒæµ‹è¯•
```bash
# è¿æ¥æµ‹è¯•è®¾å¤‡
flutter devices

# è¿è¡Œè°ƒè¯•ç‰ˆæœ¬
flutter run --debug

# çƒ­é‡è½½æµ‹è¯•
r (åœ¨è¿è¡Œæ—¶æŒ‰ré”®)
```

### ç”Ÿäº§ç¯å¢ƒæ„å»º
```bash
# Android APK
flutter build apk --release

# Android App Bundle
flutter build appbundle --release

# iOS (éœ€è¦macOS)
flutter build ios --release
```

### å‘å¸ƒå‡†å¤‡
1. **Android**: ç”Ÿæˆç­¾åå¯†é’¥ï¼Œé…ç½®`android/app/build.gradle`
2. **iOS**: é…ç½®Apple Developerè´¦å·ï¼Œè®¾ç½®Bundle ID
3. **æµ‹è¯•**: åœ¨çœŸå®è®¾å¤‡ä¸Šè¿›è¡Œå……åˆ†æµ‹è¯•
4. **å‘å¸ƒ**: æäº¤åˆ°Google Play Store / Apple App Store

## ğŸ¤ ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ

æœ¬Flutteråº”ç”¨å®Œç¾é›†æˆç°æœ‰çš„è§†é¢‘ä¼šè®®ç³»ç»Ÿï¼š

### Webç‰ˆæœ¬äº’é€š
- **åŒä¸€LiveKitæœåŠ¡å™¨**: ä½¿ç”¨ç›¸åŒçš„LiveKitå®ä¾‹
- **å…±äº«æˆ¿é—´**: Webç”¨æˆ·å’Œç§»åŠ¨ç”¨æˆ·å¯åœ¨åŒä¸€æˆ¿é—´
- **ç»Ÿä¸€æƒé™**: ä½¿ç”¨ç›¸åŒçš„ç”¨æˆ·æƒé™ç³»ç»Ÿ
- **å®æ—¶åŒæ­¥**: ç”¨æˆ·çŠ¶æ€å’Œæ¶ˆæ¯å®æ—¶åŒæ­¥

### åç«¯å¤ç”¨
- **æ— éœ€ä¿®æ”¹**: ç°æœ‰PHPåç«¯æ— éœ€ä»»ä½•ä¿®æ”¹
- **æ•°æ®åº“å…±äº«**: ä½¿ç”¨ç›¸åŒçš„SQLiteæ•°æ®åº“
- **APIå…¼å®¹**: å®Œå…¨å…¼å®¹ç°æœ‰APIæ¥å£

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰æŠ€æœ¯é—®é¢˜æˆ–éœ€è¦æ”¯æŒï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å†…éƒ¨ä½¿ç”¨ï¼Œæ‰€æœ‰æƒåˆ©ä¿ç•™ã€‚